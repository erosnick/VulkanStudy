// 如果声明了Dynamic Buffer，则必须包含对vkCmdBindDescriptorSets函数的调用。
// VkWriteDescriptorSet中的binding、descriptorType和descriptorCount要和VkDescriptorSetLayoutBinding相应的字段严格匹配。

// 创建VkDescriptorPoolSize的时候记得指定type和descriptorCount字段。
std::array<VkDescriptorPoolSize, 4> poolSizes;
poolSizes[0].type = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC;
poolSizes[0].descriptorCount = static_cast<uint32_t>(swapChainImages.size());
poolSizes[1].type = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER;
poolSizes[1].descriptorCount = static_cast<uint32_t>(swapChainImages.size());
poolSizes[2].type = VK_DESCRIPTOR_TYPE_SAMPLER;
poolSizes[2].descriptorCount = static_cast<uint32_t>(swapChainImages.size());
poolSizes[3].type = VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE;
poolSizes[3].descriptorCount = static_cast<uint32_t>(swapChainImages.size() * 3);

// maxSets表示最多能创建的VkDescriptorSet数量
VkDescriptorPoolCreateInfo poolInfo = {};
poolInfo.sType = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO;
poolInfo.poolSizeCount = static_cast<uint32_t>(poolSizes.size());
poolInfo.pPoolSizes = poolSizes.data();
poolInfo.maxSets = static_cast<uint32_t>(swapChainImages.size() * 4);